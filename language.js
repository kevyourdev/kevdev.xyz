const translations = {
  en: {
    // Home page
    home: 'Home',
    blog: 'Blog',
    contact: 'Contact',
    greeting: "Hey, I'm Kevin",
    subtitle: 'A Software Engineer trying to make a difference.',
    fullstack: 'Full-stack Developer',
    mobile: 'Mobile App Developer',
    bilingual: 'English/Chinese Translator',
    learnMore: 'Learn More About Me',

    // About section
    journey: 'My Journey',
    journeyText1:
      'My journey in technology began when I was a kid, tinkering with computers to enhance my gaming experience. After that, I studied Computer Science and Information Engineering at National Chung Cheng University, where I developed a interest in software development.',
    journeyText2:
      "After graduation, I joined IBM as an Application Developer, where I collaborated with talented engineers and designers to create frontend solutions. This experience led me to my current role at VOCOM INTERNATIONAL, where I'm responsible for developing backend APIs for eSIM systems.",
    journeyText3:
      'My diverse experience includes internships in FinTech at CTBC Bank, blockchain technology at Fansi, and Android development at SABF. Each role has contributed to my growth as a well-rounded developer.',

    // Skills section
    skillsExpertise: 'Skills & Expertise',
    technicalSkills: 'Technical Skills',
    fullstackDev: 'Full-stack Development',
    mobileDev: 'Mobile Development',
    devTools: 'Development Tools',
    professionalSkills: 'Professional Skills',
    projectManagement: 'Project Management',
    languageServices: 'Language Services',

    // Work Timeline
    workTimeline: 'Work Timeline',
    present: 'Present',

    // Featured Work
    featuredWork: 'Featured Work',
    learnMoreArrow: 'Learn more →',

    // Contact page
    getInTouch: 'Get in Touch',
    name: 'Name',
    email: 'Email',
    message: 'Message',
    send: 'Send Message',

    // Additional translations for timeline items
    softwareEngineer: 'Software Engineer',
    applicationDev: 'Application Developer',
    fintechIntern: 'FinTech Development Intern',
    blockchainIntern: 'Blockchain and NFT Intern',
    androidIntern: 'Android Development Intern',

    // Timeline descriptions
    esimDesc:
      'Responsible for developing backend APIs for eSIM system (Node.js) and Database Management (MySQL).',
    ibmDesc:
      'Collaborated with backend engineers and UI designers to create robust frontend solutions using jQuery, ReactJS, Bootstrap, Angular, and PrimeNG.',
    ctbcDesc:
      'Responsible for developing RPA programs and full-stack development using Java Spring framework.',
    fansiDesc:
      'Responsible for writing articles, blockchain research, and social media marketing.',
    sabfDesc: 'Responsible for developing applications using Java/Kotlin.',

    // Featured work
    esimSystem: 'eSIM System',
    ibmFrontend: 'IBM Frontend',
    rpaDev: 'RPA Development',

    // Time periods
    present: 'Present',
    timeFormat: '{startDate} - {endDate}',

    // Additional translations
    timeDesc: 'Duration',
    company: 'Company',
    role: 'Role',
    description: 'Description',
    skills: 'Skills Used',
    viewProject: 'View Project',
    sendMessage: 'Send Message',

    // Blog page
    loading: 'Loading posts...',
    loadError: 'Failed to load blog posts. Please try again later.',
  },
  zh: {
    // Home page
    home: '首頁',
    blog: '部落格',
    contact: '聯絡我',
    greeting: '嗨，我是 Kevin',
    subtitle: '一位致力於創造有意義數位體驗的軟體工程師。',
    fullstack: '全端開發工程師',
    mobile: '行動應用開發者',
    bilingual: '雙語專業人才',
    learnMore: '了解更多',

    // About section
    journey: '我的歷程',
    journeyText1:
      '我的技術之旅始於國立中正大學，在那裡我主修資訊工程學系。在學術生涯中，我在保持優異的技術和語言能力的同時，也建立了紮實的軟體開發基礎。',
    journeyText2:
      '畢業後，我加入 IBM 擔任應用程式開發人員，與優秀的工程師和設計師合作，創建強大的前端解決方案。這些經驗帶領我到現在的職位，在 VOCOM INTERNATIONAL 負責開發 eSIM 系統的後端 API。',
    journeyText3:
      '我的經驗包括在中國信託的金融科技實習、在 Fansi 的區塊鏈技術實習，以及在印度商亞竹基金會的 Android 開發實習。每個角色都為我成為全方位開發者提供了寶貴經驗。',

    // Skills section
    skillsExpertise: '技能與專長',
    technicalSkills: '技術能力',
    fullstackDev: '全端開發',
    mobileDev: '行動開發',
    devTools: '開發工具',
    professionalSkills: '專業技能',
    projectManagement: '專案管理',
    languageServices: '語言服務',

    // Work Timeline
    workTimeline: '工作經歷',
    present: '至今',

    // Featured Work
    featuredWork: '精選作品',
    learnMoreArrow: '了解更多 →',

    // Contact page
    getInTouch: '聯絡方式',
    name: '姓名',
    email: '電子郵件',
    message: '訊息',
    send: '發送訊息',

    // Additional translations for timeline items
    softwareEngineer: '軟體工程師',
    applicationDev: '應用程式開發工程師',
    fintechIntern: '金融科技實習生',
    blockchainIntern: '區塊鏈實習生',
    androidIntern: 'Android 開發實習生',

    // Timeline descriptions
    esimDesc: '負責使用 Node.js 和 MySQL 開發 eSIM 系統的後端 API。',
    ibmDesc:
      '與後端工程師和UI設計師合作，使用 jQuery、ReactJS、Bootstrap、Angular 和 PrimeNG 進行前端開發。',
    ctbcDesc: '負責開發 RPA 程式以及使用 Java Spring framework 進行全端開發。',
    fansiDesc: '負責撰寫文章、區塊鏈研究和社群媒體行銷。',
    sabfDesc: '負責使用 Java/Kotlin 進行應用程式開發。',

    // Featured work
    esimSystem: 'eSIM 系統',
    ibmFrontend: 'IBM 前端開發',
    rpaDev: 'RPA 開發',

    // Time periods
    present: '至今',
    timeFormat: '{startDate} - {endDate}',

    // Additional translations
    timeDesc: '時間',
    company: '公司',
    role: '職位',
    description: '描述',
    skills: '使用技能',
    viewProject: '查看專案',
    sendMessage: '發送訊息',

    // Blog page
    loading: '載入文章中...',
    loadError: '無法載入文章，請稍後再試。',
  },
};

function updateContent(lang) {
  const elements = document.querySelectorAll('[data-i18n]');
  elements.forEach((element, index) => {
    // Add fade-out animation
    element.style.opacity = '0';
    element.style.transform = 'translateY(10px)';
    element.style.transition = 'opacity 0.3s ease, transform 0.3s ease';

    // Stagger the animations
    setTimeout(() => {
      const key = element.getAttribute('data-i18n');
      if (translations[lang] && translations[lang][key]) {
        element.textContent = translations[lang][key];
      }
      // Add fade-in animation
      element.style.opacity = '1';
      element.style.transform = 'translateY(0)';
    }, index * 50); // Stagger each element by 50ms
  });
}

// Add language toggle button with animation
const languageToggle = document.createElement('button');
languageToggle.id = 'language-toggle';
languageToggle.className = 'language-toggle';
languageToggle.setAttribute('aria-label', 'Toggle language');
languageToggle.innerHTML = `
    <span class="lang-text" style="transition: all 0.3s ease">EN/中</span>
`;
document.body.appendChild(languageToggle);

// Initialize language
let currentLang = localStorage.getItem('language') || 'en';
updateContent(currentLang);

// Toggle language on button click with enhanced animations
languageToggle.addEventListener('click', () => {
  // Disable button during animation
  languageToggle.disabled = true;

  // Add rotation and scale animation to button
  languageToggle.style.transform = 'rotate(360deg) scale(0.9)';

  // Fade out all content
  document.querySelectorAll('[data-i18n]').forEach((element) => {
    element.style.opacity = '0';
    element.style.transform = 'translateY(10px)';
  });

  setTimeout(() => {
    // Change language
    currentLang = currentLang === 'en' ? 'zh' : 'en';
    localStorage.setItem('language', currentLang);
    document.documentElement.setAttribute('lang', currentLang);

    // Update content with staggered animations
    updateContent(currentLang);

    // Reset button animation
    setTimeout(() => {
      languageToggle.style.transform = '';
      languageToggle.disabled = false;
    }, 300);
  }, 300);
});

// Add these styles to the existing ones in styles.css
const style = document.createElement('style');
style.textContent = `
    [data-i18n] {
        transition: opacity 0.3s ease, transform 0.3s ease;
    }
    
    .language-toggle {
        transition: transform 0.3s ease, background-color 0.3s ease;
    }
    
    .language-toggle:disabled {
        cursor: wait;
    }
    
    .lang-text {
        display: inline-block;
        transition: transform 0.3s ease;
    }
    
    .language-toggle:hover .lang-text {
        transform: scale(1.1);
    }
`;
document.head.appendChild(style);

// Initialize language when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  initializeLanguage();

  // Add initial fade-in animation to all translatable elements
  document.querySelectorAll('[data-i18n]').forEach((element, index) => {
    element.style.opacity = '0';
    element.style.transform = 'translateY(10px)';

    setTimeout(() => {
      element.style.opacity = '1';
      element.style.transform = 'translateY(0)';
    }, index * 50);
  });
});

// Add this to language.js
function initializeLanguage() {
  const savedLang = localStorage.getItem('language') || 'en';
  document.documentElement.setAttribute('lang', savedLang);
  updateContent(savedLang);
}

// Call initializeLanguage when DOM is loaded
document.addEventListener('DOMContentLoaded', initializeLanguage);

// Add this to handle the send button in contact form
if (document.querySelector('button[type="submit"]')) {
  document
    .querySelector('button[type="submit"]')
    .setAttribute('data-i18n', 'send');
}
